<div class="max-w-2xl mx-auto px-4 sm:px-6 py-8">
  <h1 class="page-title mb-2">새 계정 생성</h1>
  <p class="text-sm text-gray-500 mb-8">학교 구성원의 새 계정을 생성합니다.</p>

  <div class="card-flat p-6">
    <%= form_with(model: @user, url: school_admin_members_path, class: "space-y-5") do |f| %>
      <% if @user.errors.any? %>
        <div class="card-flat border-red-200 bg-red-50 p-4">
          <p class="text-sm font-medium text-red-800 mb-2">입력 오류가 있습니다</p>
          <ul class="list-disc list-inside text-sm text-red-600 space-y-1">
            <% @user.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div>
        <%= f.label :name, "이름", class: "block text-sm font-medium text-gray-700 mb-1.5" %>
        <%= f.text_field :name, class: "input-field", placeholder: "이름을 입력하세요" %>
      </div>

      <div>
        <%= f.label :email, "이메일", class: "block text-sm font-medium text-gray-700 mb-1.5" %>
        <%= f.email_field :email, class: "input-field", placeholder: "이메일 주소를 입력하세요" %>
      </div>

      <div>
        <%= f.label :role, "역할", class: "block text-sm font-medium text-gray-700 mb-1.5" %>
        <%= f.select :role, [["학생", "student"], ["학부모", "parent"]], {}, class: "input-field" %>
      </div>

      <div>
        <%= f.label :grade_level, "학년 (학생만)", class: "block text-sm font-medium text-gray-700 mb-1.5" %>
        <%= f.number_field :grade_level, in: 1..12, class: "input-field" %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1.5">연결할 학생 (학부모인 경우)</label>
        <%= select_tag :student_id,
          options_from_collection_for_select(@school&.users&.where(role: :student) || [], :id, :name),
          include_blank: "선택 안함", class: "input-field" %>
      </div>

      <div class="flex items-center gap-3 pt-2">
        <%= f.submit "계정 생성", class: "btn-primary btn-lg cursor-pointer" %>
        <%= link_to "취소", school_admin_members_path, class: "btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>
